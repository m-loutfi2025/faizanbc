<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) - Loaded only after cookie consent -->
    <script>
      // Initialize Google Analytics only if consent is given
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      
      function initGoogleAnalytics() {
        const script = document.createElement('script');
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-N5EDX94V87';
        script.async = true;
        document.head.appendChild(script);
        
        script.onload = function() {
          gtag('js', new Date());
          gtag('config', 'G-N5EDX94V87');
        };
      }
      
      // Check if user has already consented
      if (localStorage.getItem('cookieConsent') === 'accepted') {
        initGoogleAnalytics();
      }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domain Redirect Test - Faizan BC</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .status { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .test-item { margin: 15px 0; padding: 10px; background: #f8f9fa; border-left: 4px solid #007bff; }
        code { background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-family: monospace; }
        .back-section { margin-top: 30px; text-align: center; }
        .back-button { background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; }
        .external-link { color: #007bff; }
        
        /* Cookie Consent Banner Styles - Enhanced Tailwind-Based Design */
        .cookie-popup {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            opacity: 0;
            transform: translateY(100%);
            pointer-events: none;
            z-index: 1000;
            width: 100%;
            left: 0;
            bottom: 0;
            border-radius: 12px 12px 0 0;
        }
        .cookie-popup.is-visible { opacity: 1; transform: translateY(0); pointer-events: all; }
        .cookie-popup.is-dismissing { transform: translateY(100%); }
        .banner-content-wrapper { max-width: 1280px; margin: 0 auto; display: flex; flex-direction: column; gap: 1.5rem; }
        @media (min-width: 1024px) {
            .banner-content-wrapper { flex-direction: row; align-items: center; justify-content: space-between; }
            .banner-text-container { flex-grow: 1; padding-right: 2rem; }
            .banner-button-container { flex-shrink: 0; max-width: 380px; }
        }

        /* Cookie Banner Utility Classes */
        .cookie-banner-font { font-family: Arial, sans-serif; }
        .cookie-banner-title { font-size: 1.25rem; font-weight: bold; color: #111827; margin-bottom: 0.5rem; display: flex; align-items: center; }
        .cookie-banner-text { color: #4b5563; font-size: 0.875rem; line-height: 1.6; }
        .cookie-banner-buttons-wrapper { width: 100%; display: flex; flex-direction: column; gap: 0.75rem; }
        .cookie-btn-accept-style { 
            width: 100%; 
            padding: 0.75rem 1rem; 
            color: white; 
            font-weight: 600; 
            border-radius: 0.5rem; 
            transition: all 0.2s; 
            background: linear-gradient(to right, #1e3a8a, #3b82f6); 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: none;
            cursor: pointer;
        }
        .cookie-btn-accept-style:hover { 
            background: linear-gradient(to right, #1e40af, #2563eb); 
            box-shadow: 0 6px 8px rgba(0,0,0,0.15); 
        }
        .cookie-btn-reject-style { 
            width: 100%; 
            padding: 0.75rem 1rem; 
            font-weight: 600; 
            border-radius: 0.5rem; 
            border: 2px solid #9ca3af; 
            color: #4b5563; 
            background: white; 
            transition: all 0.15s;
            cursor: pointer;
        }
        .cookie-btn-reject-style:hover { 
            border-color: #6b7280; 
            background: #f9fafb; 
        }
        .cookie-preferences-link { 
            text-align: center; 
            padding-top: 0.5rem; 
        }
        .cookie-preferences-btn { 
            font-size: 0.875rem; 
            font-weight: 500; 
            color: #9ca3af; 
            background: none; 
            border: none; 
            cursor: pointer; 
            transition: color 0.15s;
        }
        .cookie-preferences-btn:hover { color: #6b7280; }
        .cookie-banner-wrapper { 
            background: white; 
            box-shadow: 0 -4px 20px rgba(59, 130, 246, 0.2); 
            border-top: 1px solid #f3f4f6; 
            padding: 1.5rem 2rem; 
        }
        .cookie-emoji-spacing { margin-left: 0.5rem; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Domain Redirect Test Page</h1>
        <p>This page helps you verify that your domain redirects are working correctly.</p>
        
        <div class="status info">
            <strong>Current URL:</strong> <code id="current-url"></code>
        </div>
        
        <div class="status info">
            <strong>Canonical URL:</strong> <code id="canonical-url"></code>
        </div>
        
        <h2>üîß Automated Redirect Tests:</h2>
        <div class="test-item">
            <strong>Quick Test Tools:</strong><br>
            <a href="https://httpstatus.io/" target="_blank" rel="noopener" class="external-link">üîó HTTPStatus.io</a> - 
            <a href="https://www.redirect-checker.org/" target="_blank" rel="noopener" class="external-link">üîó Redirect Checker</a> - 
            <a href="https://smallseotools.com/redirect-checker/" target="_blank" rel="noopener" class="external-link">üîó SEO Redirect Tool</a>
        </div>
        
        <h2>‚úÖ Manual Tests to Perform:</h2>
        
        <div class="test-item">
            <strong>1. Domain Canonicalization Tests:</strong><br>
            <code>http://faizanbc.com</code> ‚Üí <code>https://www.faizanbc.com/</code> (301)<br>
            <code>https://faizanbc.com</code> ‚Üí <code>https://www.faizanbc.com/</code> (301)<br>
            <code>http://www.faizanbc.com</code> ‚Üí <code>https://www.faizanbc.com/</code> (301)<br>
            <code>https://www.faizanbc.com/</code> ‚Üí Stay as is (200)
        </div>
        
        <div class="test-item">
            <strong>2. Section URL Tests:</strong><br>
            <a href="/about" target="_blank">üîó /about</a> - Should load homepage + scroll to About<br>
            <a href="/services" target="_blank">üîó /services</a> - Should load homepage + scroll to Services<br>
            <a href="/projects" target="_blank">üîó /projects</a> - Should load homepage + scroll to Projects<br>
            <a href="/contact" target="_blank">üîó /contact</a> - Should load homepage + scroll to Contact
        </div>
        
        <div class="test-item">
            <strong>3. Hash URL Redirect Tests:</strong><br>
            <a href="/#about" target="_blank">üîó /#about</a> - Should redirect to /about (301)<br>
            <a href="/#services" target="_blank">üîó /#services</a> - Should redirect to /services (301)<br>
            <a href="/#projects" target="_blank">üîó /#projects</a> - Should redirect to /projects (301)
        </div>
        
        <div class="test-item">
            <strong>4. SEO Files Test:</strong><br>
            <a href="/sitemap.xml" target="_blank">üîó /sitemap.xml</a> - Should load XML sitemap<br>
            <a href="/robots.txt" target="_blank">üîó /robots.txt</a> - Should load robots.txt file
        </div>
        
        <h2>üéØ Expected Results:</h2>
        <div class="status success">
            <ul>
                <li>All URLs should end up at <code>https://www.faizanbc.com/</code> (with www and https)</li>
                <li>Section URLs should load the homepage but show the correct section</li>
                <li>Canonical URL should match the current clean URL</li>
                <li>No redirect loops or errors</li>
            </ul>
        </div>
        
        <h2>üö® If You See Issues:</h2>
        <div class="status warning">
            <ul>
                <li><strong>Multiple redirects:</strong> Check your _redirects file order</li>
                <li><strong>Wrong canonical URL:</strong> Check JavaScript canonical update function</li>
                <li><strong>404 errors:</strong> Ensure _redirects file is uploaded to Netlify</li>
                <li><strong>No HTTPS:</strong> Check Netlify SSL settings</li>
            </ul>
        </div>
        
        <div class="back-section">
            <a href="/" class="back-button">‚Üê Back to Homepage</a>
        </div>
    </div>
    
    <!-- Cookie Consent Banner - Enhanced Design -->
    <div id="cookie-consent-popup" class="cookie-popup fixed cookie-banner-font cookie-banner-wrapper">
        <div class="banner-content-wrapper">
            <div class="banner-text-container">
                <h2 class="cookie-banner-title">
                    We value your privacy and your experience <span class="cookie-emoji-spacing">üç™</span>
                </h2>
                <p class="cookie-banner-text">
                    At faizanbc.com, your privacy is our top priority. We use cookies and similar technologies to enhance your browsing experience, deliver personalized content, measure site performance, and analyze traffic patterns. You can choose which types of cookies to allow or decline. Your preferences will be respected and saved securely. By accepting, you help us provide a better, more tailored experience.
                </p>
            </div>
            <div class="banner-button-container">
                <div class="cookie-banner-buttons-wrapper">
                    <button id="accept-all-btn" 
                            class="cookie-btn-accept-style"
                            aria-label="Accept all cookies and tracking">
                        Accept All
                    </button>
                    <button id="reject-btn" 
                            class="cookie-btn-reject-style"
                            aria-label="Reject all cookies and tracking">
                        Reject
                    </button>
                    <div class="cookie-preferences-link">
                        <button id="preferences-link" 
                                class="cookie-preferences-btn"
                                aria-label="Manage cookie preferences">
                            Manage Preferences
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Display current URL info
        document.getElementById('current-url').textContent = window.location.href;
        
        // Display canonical URL if exists
        const canonical = document.querySelector('link[rel="canonical"]');
        document.getElementById('canonical-url').textContent = canonical ? canonical.href : 'Not found';
        
        // Auto-test redirect status
        if (window.location.protocol !== 'https:') {
            document.body.insertAdjacentHTML('afterbegin', 
                '<div class="status warning"><strong>‚ö†Ô∏è Warning:</strong> You are not using HTTPS! This should redirect automatically.</div>'
            );
        }
        
        if (!window.location.hostname.startsWith('www.')) {
            document.body.insertAdjacentHTML('afterbegin', 
                '<div class="status warning"><strong>‚ö†Ô∏è Warning:</strong> You are not using WWW! This should redirect automatically.</div>'
            );
        }
        
        if (window.location.protocol === 'https:' && window.location.hostname.startsWith('www.')) {
            document.body.insertAdjacentHTML('afterbegin', 
                '<div class="status success"><strong>‚úÖ Success:</strong> You are using the correct canonical domain (HTTPS + WWW)!</div>'
            );
        }
        
        // Cookie Consent Management - Enhanced GDPR/CCPA Compliant System
        const CONSENT_KEY = 'cookieConsent';
        const POPUP_ID = 'cookie-consent-popup';
        const DELAY_MS = 1500;
        const popup = document.getElementById(POPUP_ID);
        
        function setConsent(choice) {
            if (!choice) return;
            localStorage.setItem(CONSENT_KEY, choice);
            console.log(`Cookie consent set to: ${choice}`);
            if (choice === 'accepted') {
                if (typeof initGoogleAnalytics === 'function') { initGoogleAnalytics(); }
                console.log('‚úÖ Google Analytics Loaded and Initialized.');
            } else {
                console.log('‚ùå Tracking scripts blocked due to rejection/no consent.');
            }
            hidePopup();
        }
        
        function hidePopup() {
            popup.classList.add('is-dismissing');
            setTimeout(() => { popup.style.display = 'none'; popup.classList.remove('is-visible', 'is-dismissing'); }, 500);
        }
        
        function showPopup() {
            popup.style.display = 'block';
            void popup.offsetWidth;
            popup.classList.add('is-visible');
        }
        
        function checkConsent() {
            const currentConsent = localStorage.getItem(CONSENT_KEY);
            if (currentConsent) {
                console.log(`Existing consent found: ${currentConsent}`);
                if (currentConsent === 'accepted' && typeof initGoogleAnalytics === 'function') { initGoogleAnalytics(); }
                popup.style.display = 'none';
            } else {
                setTimeout(showPopup, DELAY_MS);
            }
        }
        
        function initConsentApp() {
            document.getElementById('accept-all-btn')?.addEventListener('click', () => { setConsent('accepted'); });
            document.getElementById('reject-btn')?.addEventListener('click', () => { setConsent('rejected'); });
            document.getElementById('preferences-link')?.addEventListener('click', () => {
                alert('You can choose "Accept All" or "Reject" to manage your preferences. Detailed options coming soon.');
                setConsent('preferences_set');
            });
            checkConsent();
        }
        
        initConsentApp();
    </script>
</body>
</html>
